<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uniselva - Sistema de Gestão de TI</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--primary:#0d6efd;
--primary-dark:#0a58ca;
--success:#198754;
--danger:#dc3545;
--warning:#ffc107;
--info:#0dcaf0;
--bg:#f5f7fa;
--sidebar:#2c3e50;
--sidebar-hover:#34495e;
--card:#fff;
--border:#dee2e6;
--text:#212529;
--text-muted:#6c757d;
--shadow:rgba(0,0,0,0.1);
}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
.hide{display:none!important}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideInLeft{from{transform:translateX(-20px);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes slideInRight{from{transform:translateX(20px);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes slideInUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}
.animate-fade{animation:fadeIn 0.5s ease}
.animate-slide-left{animation:slideInLeft 0.5s ease}
.animate-slide-right{animation:slideInRight 0.5s ease}
.animate-slide-up{animation:slideInUp 0.5s ease}
.animate-pulse{animation:pulse 2s infinite}
.animate-spin{animation:spin 1s linear infinite}
.animate-bounce{animation:bounce 1s infinite}
.icon-animated{transition:all 0.3s ease}
.icon-animated:hover{transform:scale(1.2) rotate(10deg)}
.loader{border:4px solid var(--border);border-top:4px solid var(--primary);border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:2rem auto}
.notification{position:fixed;top:20px;right:20px;background:var(--card);padding:1rem 1.5rem;border-radius:8px;box-shadow:0 4px 12px var(--shadow);z-index:1000;animation:slideInRight 0.5s ease;min-width:300px}
.notification.success{border-left:4px solid var(--success)}
.notification.error{border-left:4px solid var(--danger)}
.notification.info{border-left:4px solid var(--info)}
.table tbody tr{transition:.2s}
.table tbody tr:hover{background:var(--bg);transform:scale(1.01)}
.btn{position:relative;overflow:hidden}
.btn::before{content:'';position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:rgba(255,255,255,0.3);transform:translate(-50%,-50%);transition:.5s}
.btn:active::before{width:300px;height:300px}
#login{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#2c3e50,#34495e)}
.login-box{background:var(--card);padding:3rem;border-radius:10px;box-shadow:0 10px 40px rgba(0,0,0,0.2);width:100%;max-width:450px}
.login-header{text-align:center;margin-bottom:2rem}
.login-header img{width:80px;margin-bottom:1rem}
.login-header h1{color:var(--primary);font-size:1.8rem;margin-bottom:0.5rem}
.login-header p{color:var(--text-muted);font-size:0.95rem}
.form-group{margin-bottom:1.25rem}
.form-group label{display:block;margin-bottom:0.5rem;font-weight:600;color:var(--text)}
.form-control{width:100%;padding:0.75rem 1rem;border:1px solid var(--border);border-radius:6px;font-size:1rem;transition:.3s}
.form-control:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(13,110,253,0.1)}
.btn{padding:0.75rem 1.5rem;border:none;border-radius:6px;font-size:1rem;font-weight:600;cursor:pointer;transition:.3s;display:inline-flex;align-items:center;gap:0.5rem;justify-content:center}
.btn-primary{background:var(--primary);color:#fff;width:100%}
.btn-primary:hover{background:var(--primary-dark)}
.container{display:flex;height:100vh;overflow:hidden}
.sidebar{width:260px;background:var(--sidebar);color:#fff;display:flex;flex-direction:column;position:fixed;left:0;top:0;height:100vh;z-index:100;box-shadow:2px 0 10px rgba(0,0,0,0.2)}
.sidebar-header{padding:1.5rem;border-bottom:1px solid rgba(255,255,255,0.1);text-align:center}
.sidebar-header h2{font-size:1.2rem;font-weight:600;display:flex;align-items:center;justify-content:center;gap:0.5rem}
.sidebar-nav{flex:1;padding:1rem 0;overflow-y:auto}
.nav-item{padding:0.75rem 1.5rem;display:flex;align-items:center;gap:0.75rem;color:rgba(255,255,255,0.8);text-decoration:none;transition:.3s;cursor:pointer;font-size:0.95rem}
.nav-item:hover,.nav-item.active{background:var(--sidebar-hover);color:#fff}
.nav-item i{width:20px;text-align:center}
.nav-section{padding:0.5rem 1.5rem;font-size:0.75rem;text-transform:uppercase;color:rgba(255,255,255,0.5);font-weight:600;margin-top:1rem}
.sidebar-footer{padding:1rem 1.5rem;border-top:1px solid rgba(255,255,255,0.1)}
.user-info{display:flex;align-items:center;gap:0.75rem;margin-bottom:0.75rem}
.user-avatar{width:40px;height:40px;border-radius:50%;background:var(--primary);display:flex;align-items:center;justify-content:center;font-weight:600;font-size:1.1rem}
.main-content{flex:1;margin-left:260px;height:100vh;overflow-y:auto;overflow-x:hidden}
.topbar{background:var(--card);padding:1rem 2rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:50;box-shadow:0 2px 4px var(--shadow)}
.breadcrumb{display:flex;align-items:center;gap:0.5rem;font-size:0.9rem;color:var(--text-muted)}
.breadcrumb a{color:var(--primary);text-decoration:none}
.breadcrumb a:hover{text-decoration:underline}
.topbar-actions{display:flex;align-items:center;gap:1rem}
.icon-btn{width:40px;height:40px;border-radius:50%;background:var(--bg);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.3s}
.icon-btn:hover{background:var(--border)}
.content{padding:2rem}
.page-header{margin-bottom:2rem}
.page-title{font-size:1.8rem;font-weight:600;color:var(--text);margin-bottom:0.5rem}
.page-subtitle{color:var(--text-muted);font-size:1rem}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem}
.stat-card{background:var(--card);padding:1.5rem;border-radius:8px;box-shadow:0 2px 8px var(--shadow);display:flex;align-items:center;gap:1rem;transition:.3s;animation:slideInUp 0.5s ease;cursor:pointer}
.stat-card:hover{transform:translateY(-5px) scale(1.02);box-shadow:0 8px 20px var(--shadow)}
.stat-icon{width:60px;height:60px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#fff}
.stat-icon.blue{background:var(--primary)}
.stat-icon.green{background:var(--success)}
.stat-icon.yellow{background:var(--warning)}
.stat-icon.red{background:var(--danger)}
.stat-info h3{font-size:2rem;font-weight:700;margin-bottom:0.25rem}
.stat-info p{color:var(--text-muted);font-size:0.9rem}
.card{background:var(--card);border-radius:8px;box-shadow:0 2px 8px var(--shadow);margin-bottom:1.5rem;transition:.3s}
.card:hover{box-shadow:0 4px 16px var(--shadow)}
.card-header{padding:1.25rem 1.5rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.card-title{font-size:1.1rem;font-weight:600;color:var(--text)}
.card-body{padding:1.5rem}
.table{width:100%;border-collapse:collapse}
.table thead{background:var(--bg)}
.table th{padding:0.75rem 1rem;text-align:left;font-weight:600;font-size:0.85rem;text-transform:uppercase;color:var(--text-muted);border-bottom:2px solid var(--border)}
.table td{padding:0.75rem 1rem;border-bottom:1px solid var(--border)}
.table tbody tr:hover{background:var(--bg)}
.badge{padding:0.35rem 0.75rem;border-radius:20px;font-size:0.75rem;font-weight:600;text-transform:uppercase}
.badge-new{background:#e3f2fd;color:#1976d2}
.badge-assigned{background:#fff3e0;color:#f57c00}
.badge-progress{background:#e8f5e9;color:#388e3c}
.badge-solved{background:#f3e5f5;color:#7b1fa2}
.badge-closed{background:#e0e0e0;color:#616161}
.badge-high{background:#ffebee;color:#c62828}
.badge-medium{background:#fff3e0;color:#f57c00}
.badge-low{background:#e8f5e9;color:#388e3c}
.btn-sm{padding:0.4rem 0.8rem;font-size:0.85rem}
.btn-success{background:var(--success);color:#fff}
.btn-danger{background:var(--danger);color:#fff}
.btn-secondary{background:var(--text-muted);color:#fff}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000;align-items:center;justify-content:center}
.modal.show{display:flex}
.modal-dialog{background:var(--card);border-radius:10px;width:90%;max-width:800px;max-height:90vh;overflow-y:auto;box-shadow:0 10px 40px rgba(0,0,0,0.3)}
.modal-header{padding:1.5rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.modal-title{font-size:1.3rem;font-weight:600}
.modal-body{padding:1.5rem}
.modal-footer{padding:1rem 1.5rem;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:0.75rem}
.btn-close{width:35px;height:35px;border-radius:50%;border:none;background:var(--danger);color:#fff;cursor:pointer;font-size:1.2rem}
@media(max-width:768px){
.sidebar{width:100%;height:auto;position:relative}
.main-content{margin-left:0}
.stats-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<!-- Login -->
<div id="login">
<div class="login-box">
<div class="login-header">
<i class="fas fa-laptop-code" style="font-size:4rem;color:var(--primary)"></i>
<h1>Uniselva</h1>
<p>Sistema de Gestão de TI e Chamados</p>
</div>
<form id="formLogin">
<div class="form-group">
<label>Usuário</label>
<input type="text" class="form-control" id="username" required placeholder="Digite seu usuário">
</div>
<div class="form-group">
<label>Senha</label>
<input type="password" class="form-control" id="password" required placeholder="Digite sua senha">
</div>
<button type="submit" class="btn btn-primary">
<i class="fas fa-sign-in-alt"></i> Entrar
</button>
</form>
<p style="text-align:center;margin-top:1.5rem;font-size:0.85rem;color:var(--text-muted)">
Admin: admin / admin123 | Técnico: tecnico / tec123 | User: user / user123
</p>
</div>
</div>

<!-- Dashboard -->
<div id="dashboard" class="container hide">
<aside class="sidebar">
<div class="sidebar-header">
<h2><i class="fas fa-laptop-code"></i> Uniselva</h2>
</div>
<nav class="sidebar-nav">
<div class="nav-section">Principal</div>
<a class="nav-item active" data-page="home">
<i class="fas fa-home"></i> Dashboard
</a>
<a class="nav-item" data-page="tickets">
<i class="fas fa-ticket-alt"></i> Chamados
</a>
<div class="nav-section">Gestão</div>
<a class="nav-item" data-page="assets">
<i class="fas fa-desktop"></i> Ativos
</a>
<a class="nav-item" data-page="users">
<i class="fas fa-users"></i> Usuários
</a>
<a class="nav-item" data-page="knowledge">
<i class="fas fa-book"></i> Base de Conhecimento
</a>
<div class="nav-section">Ferramentas</div>
<a class="nav-item" data-page="projects">
<i class="fas fa-project-diagram icon-animated"></i> Projetos
</a>
<a class="nav-item" data-page="reservations">
<i class="fas fa-calendar-check icon-animated"></i> Reservas
</a>
<a class="nav-item" data-page="changes">
<i class="fas fa-exchange-alt icon-animated"></i> Mudanças
</a>
<a class="nav-item" data-page="problems">
<i class="fas fa-exclamation-triangle icon-animated"></i> Problemas
</a>
<div class="nav-section">Recursos</div>
<a class="nav-item" data-page="documents">
<i class="fas fa-folder icon-animated"></i> Documentos
</a>
<a class="nav-item" data-page="faq">
<i class="fas fa-question-circle icon-animated"></i> FAQ
</a>
<div class="nav-section admin-only hide">Administração</div>
<a class="nav-item admin-only hide" data-page="licenses">
<i class="fas fa-key icon-animated"></i> Licenças
</a>
<a class="nav-item admin-only hide" data-page="contracts">
<i class="fas fa-file-contract icon-animated"></i> Contratos
</a>
<a class="nav-item admin-only hide" data-page="suppliers">
<i class="fas fa-truck icon-animated"></i> Fornecedores
</a>
<a class="nav-item admin-only hide" data-page="budget">
<i class="fas fa-dollar-sign icon-animated"></i> Orçamentos
</a>
<a class="nav-item admin-only hide" data-page="sla">
<i class="fas fa-clock icon-animated"></i> SLA
</a>
<a class="nav-item admin-only hide" data-page="monitoring">
<i class="fas fa-network-wired icon-animated"></i> Monitoramento
</a>
<a class="nav-item admin-only hide" data-page="audit">
<i class="fas fa-shield-alt icon-animated"></i> Auditoria
</a>
<a class="nav-item admin-only hide" data-page="reports">
<i class="fas fa-chart-bar icon-animated"></i> Relatórios
</a>
<a class="nav-item admin-only hide" data-page="settings">
<i class="fas fa-cog icon-animated"></i> Configurações
</a>
</nav>
<div class="sidebar-footer">
<div class="user-info">
<div class="user-avatar" id="userAvatar">A</div>
<div>
<div id="userName" style="font-weight:600;font-size:0.9rem"></div>
<div id="userRole" style="font-size:0.8rem;opacity:0.8"></div>
</div>
</div>
<button class="btn btn-sm btn-danger" id="btnLogout" style="width:100%">
<i class="fas fa-sign-out-alt"></i> Sair
</button>
</div>
</aside>

<main class="main-content">
<div class="topbar">
<div class="breadcrumb">
<i class="fas fa-home"></i>
<span>/</span>
<span id="breadcrumbText">Dashboard</span>
</div>
<div class="topbar-actions">
<button class="icon-btn" title="Notificações">
<i class="fas fa-bell"></i>
</button>
<button class="icon-btn" title="Ajuda">
<i class="fas fa-question-circle"></i>
</button>
</div>
</div>

<div class="content">
<!-- Home Page -->
<div id="page-home" class="page active">
<div class="page-header">
<h1 class="page-title">Dashboard</h1>
<p class="page-subtitle">Visão geral do sistema</p>
</div>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-icon blue"><i class="fas fa-ticket-alt animate-bounce"></i></div>
<div class="stat-info">
<h3 id="statTotalTickets">0</h3>
<p>Total de Chamados</p>
</div>
</div>
<div class="stat-card">
<div class="stat-icon yellow"><i class="fas fa-clock animate-spin"></i></div>
<div class="stat-info">
<h3 id="statOpenTickets">0</h3>
<p>Chamados Abertos</p>
</div>
</div>
<div class="stat-card">
<div class="stat-icon green"><i class="fas fa-check-circle animate-pulse"></i></div>
<div class="stat-info">
<h3 id="statSolvedTickets">0</h3>
<p>Resolvidos</p>
</div>
</div>
<div class="stat-card">
<div class="stat-icon red"><i class="fas fa-desktop animate-bounce"></i></div>
<div class="stat-info">
<h3 id="statAssets">0</h3>
<p>Ativos Cadastrados</p>
</div>
</div>
</div>

<div class="card">
<div class="card-header">
<h3 class="card-title">Chamados Recentes</h3>
<button class="btn btn-sm btn-primary" onclick="showPage('tickets')">
Ver Todos
</button>
</div>
<div class="card-body">
<div id="recentTickets"></div>
</div>
</div>
</div>

<!-- Tickets Page -->
<div id="page-tickets" class="page hide">
<div class="page-header">
<h1 class="page-title">Chamados</h1>
<button class="btn btn-primary" onclick="openNewTicket()">
<i class="fas fa-plus"></i> Novo Chamado
</button>
</div>
<div class="card">
<div class="card-body">
<table class="table">
<thead>
<tr>
<th>ID</th>
<th>Título</th>
<th>Solicitante</th>
<th>Categoria</th>
<th>Prioridade</th>
<th>Status</th>
<th>Técnico</th>
<th>Ações</th>
</tr>
</thead>
<tbody id="ticketsTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Assets Page -->
<div id="page-assets" class="page hide">
<div class="page-header">
<h1 class="page-title">Gestão de Ativos</h1>
<button class="btn btn-primary" onclick="openNewAsset()">
<i class="fas fa-plus"></i> Novo Ativo
</button>
</div>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-icon blue"><i class="fas fa-desktop"></i></div>
<div class="stat-info">
<h3 id="statComputers">0</h3>
<p>Computadores</p>
</div>
</div>
<div class="stat-card">
<div class="stat-icon green"><i class="fas fa-print"></i></div>
<div class="stat-info">
<h3 id="statPrinters">0</h3>
<p>Impressoras</p>
</div>
</div>
<div class="stat-card">
<div class="stat-icon yellow"><i class="fas fa-network-wired"></i></div>
<div class="stat-info">
<h3 id="statNetwork">0</h3>
<p>Equipamentos de Rede</p>
</div>
</div>
<div class="stat-card">
<div class="stat-icon red"><i class="fas fa-mobile-alt"></i></div>
<div class="stat-info">
<h3 id="statMobiles">0</h3>
<p>Dispositivos Móveis</p>
</div>
</div>
</div>
<div class="card">
<div class="card-body">
<table class="table">
<thead>
<tr>
<th>ID</th>
<th>Nome</th>
<th>Tipo</th>
<th>Fabricante</th>
<th>Modelo</th>
<th>Localização</th>
<th>Status</th>
<th>Ações</th>
</tr>
</thead>
<tbody id="assetsTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Users Page -->
<div id="page-users" class="page hide">
<div class="page-header">
<h1 class="page-title">Usuários</h1>
<button class="btn btn-primary admin-only hide" onclick="openNewUser()">
<i class="fas fa-plus"></i> Novo Usuário
</button>
</div>
<div class="card">
<div class="card-body">
<table class="table">
<thead>
<tr>
<th>ID</th>
<th>Nome</th>
<th>Email</th>
<th>Perfil</th>
<th>Departamento</th>
<th>Status</th>
<th class="admin-only hide">Ações</th>
</tr>
</thead>
<tbody id="usersTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Knowledge Base Page -->
<div id="page-knowledge" class="page hide">
<div class="page-header">
<h1 class="page-title">Base de Conhecimento</h1>
<button class="btn btn-primary admin-only hide" onclick="openNewArticle()">
<i class="fas fa-plus"></i> Novo Artigo
</button>
</div>
<div id="knowledgeList"></div>
</div>

<!-- SLA Page -->
<div id="page-sla" class="page hide admin-only">
<div class="page-header">
<h1 class="page-title">SLA - Service Level Agreement</h1>
<button class="btn btn-primary" onclick="openNewSLA()">
<i class="fas fa-plus"></i> Novo SLA
</button>
</div>
<div class="card">
<div class="card-body">
<table class="table">
<thead>
<tr>
<th>Nome</th>
<th>Tipo</th>
<th>Prioridade</th>
<th>Tempo Resposta</th>
<th>Tempo Resolução</th>
<th>Status</th>
<th>Ações</th>
</tr>
</thead>
<tbody id="slaTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Reports Page -->
<div id="page-reports" class="page hide admin-only">
<div class="page-header">
<h1 class="page-title">Relatórios</h1>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">Chamados por Status</h3>
</div>
<div class="card-body">
<canvas id="chartStatus" height="100"></canvas>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">Chamados por Categoria</h3>
</div>
<div class="card-body">
<canvas id="chartCategory" height="100"></canvas>
</div>
</div>
</div>

<!-- Settings Page -->
<div id="page-settings" class="page hide admin-only">
<div class="page-header">
<h1 class="page-title">Configurações do Sistema</h1>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">Configurações Gerais</h3>
</div>
<div class="card-body">
<div class="form-group">
<label>Nome da Organização</label>
<input type="text" class="form-control" id="orgName" value="Minha Empresa">
</div>
<div class="form-group">
<label>Email de Notificações</label>
<input type="email" class="form-control" id="notifEmail" value="suporte@empresa.com">
</div>
<div class="form-group">
<label>Tempo Padrão de Resposta (horas)</label>
<input type="number" class="form-control" id="defaultResponseTime" value="4">
</div>
<button class="btn btn-primary" onclick="saveSettings()">
<i class="fas fa-save"></i> Salvar Configurações
</button>
</div>
</div>
</div>
</div>

<!-- Contracts Page -->
<div id="page-contracts" class="page hide admin-only">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-file-contract icon-animated"></i> Contratos</h1>
<button class="btn btn-primary" onclick="openNewContract()">
<i class="fas fa-plus"></i> Novo Contrato
</button>
</div>
<div class="card animate-slide-up">
<div class="card-body">
<table class="table">
<thead>
<tr><th>ID</th><th>Nome</th><th>Fornecedor</th><th>Tipo</th><th>Início</th><th>Fim</th><th>Valor</th><th>Status</th><th>Ações</th></tr>
</thead>
<tbody id="contractsTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Suppliers Page -->
<div id="page-suppliers" class="page hide admin-only">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-truck icon-animated"></i> Fornecedores</h1>
<button class="btn btn-primary" onclick="openNewSupplier()">
<i class="fas fa-plus"></i> Novo Fornecedor
</button>
</div>
<div class="card animate-slide-up">
<div class="card-body">
<table class="table">
<thead>
<tr><th>ID</th><th>Nome</th><th>CNPJ</th><th>Contato</th><th>Email</th><th>Telefone</th><th>Status</th><th>Ações</th></tr>
</thead>
<tbody id="suppliersTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Projects Page -->
<div id="page-projects" class="page hide">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-project-diagram icon-animated"></i> Projetos</h1>
<button class="btn btn-primary" onclick="openNewProject()">
<i class="fas fa-plus"></i> Novo Projeto
</button>
</div>
<div class="card animate-slide-up">
<div class="card-body">
<table class="table">
<thead>
<tr><th>ID</th><th>Nome</th><th>Gerente</th><th>Início</th><th>Prazo</th><th>Progresso</th><th>Status</th><th>Ações</th></tr>
</thead>
<tbody id="projectsTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Reservations Page -->
<div id="page-reservations" class="page hide">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-calendar-check icon-animated"></i> Reservas</h1>
<button class="btn btn-primary" onclick="openNewReservation()">
<i class="fas fa-plus"></i> Nova Reserva
</button>
</div>
<div class="card animate-slide-up">
<div class="card-body">
<table class="table">
<thead>
<tr><th>ID</th><th>Item</th><th>Usuário</th><th>Data Início</th><th>Data Fim</th><th>Status</th><th>Ações</th></tr>
</thead>
<tbody id="reservationsTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Budget Page -->
<div id="page-budget" class="page hide admin-only">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-dollar-sign icon-animated"></i> Orçamentos</h1>
<button class="btn btn-primary" onclick="openNewBudget()">
<i class="fas fa-plus"></i> Novo Orçamento
</button>
</div>
<div class="card animate-slide-up">
<div class="card-body">
<table class="table">
<thead>
<tr><th>ID</th><th>Nome</th><th>Valor</th><th>Gasto</th><th>Saldo</th><th>Período</th><th>Status</th><th>Ações</th></tr>
</thead>
<tbody id="budgetTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Changes Page -->
<div id="page-changes" class="page hide">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-exchange-alt icon-animated"></i> Mudanças</h1>
<button class="btn btn-primary" onclick="openNewChange()">
<i class="fas fa-plus"></i> Nova Mudança
</button>
</div>
<div class="card animate-slide-up">
<div class="card-body">
<table class="table">
<thead>
<tr><th>ID</th><th>Título</th><th>Tipo</th><th>Impacto</th><th>Urgência</th><th>Status</th><th>Responsável</th><th>Ações</th></tr>
</thead>
<tbody id="changesTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Problems Page -->
<div id="page-problems" class="page hide">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-exclamation-triangle icon-animated"></i> Problemas</h1>
<button class="btn btn-primary" onclick="openNewProblem()">
<i class="fas fa-plus"></i> Novo Problema
</button>
</div>
<div class="card animate-slide-up">
<div class="card-body">
<table class="table">
<thead>
<tr><th>ID</th><th>Título</th><th>Categoria</th><th>Impacto</th><th>Urgência</th><th>Status</th><th>Analista</th><th>Ações</th></tr>
</thead>
<tbody id="problemsTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Licenses Page -->
<div id="page-licenses" class="page hide admin-only">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-key icon-animated"></i> Licenças de Software</h1>
<button class="btn btn-primary" onclick="openNewLicense()">
<i class="fas fa-plus"></i> Nova Licença
</button>
</div>
<div class="card animate-slide-up">
<div class="card-body">
<table class="table">
<thead>
<tr><th>ID</th><th>Software</th><th>Tipo</th><th>Uso</th><th>Validade</th><th>Custo</th><th>Status</th><th>Ações</th></tr>
</thead>
<tbody id="licensesTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Documents Page -->
<div id="page-documents" class="page hide">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-folder icon-animated"></i> Documentos</h1>
<button class="btn btn-primary" onclick="openNewDocument()">
<i class="fas fa-upload"></i> Upload Documento
</button>
</div>
<div id="documentsList"></div>
</div>

<!-- FAQ Page -->
<div id="page-faq" class="page hide">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-question-circle icon-animated"></i> FAQ - Perguntas Frequentes</h1>
<button class="btn btn-primary admin-only hide" onclick="openNewFAQ()">
<i class="fas fa-plus"></i> Nova Pergunta
</button>
</div>
<div id="faqList"></div>
</div>

<!-- Audit Page -->
<div id="page-audit" class="page hide admin-only">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-shield-alt icon-animated"></i> Auditoria e Logs</h1>
</div>
<div class="card animate-slide-up">
<div class="card-body">
<table class="table">
<thead>
<tr><th>ID</th><th>Usuário</th><th>Ação</th><th>Data/Hora</th><th>IP</th></tr>
</thead>
<tbody id="auditTable"></tbody>
</table>
</div>
</div>
</div>

<!-- Network Monitoring Page -->
<div id="page-monitoring" class="page hide admin-only">
<div class="page-header">
<h1 class="page-title animate-slide-left"><i class="fas fa-network-wired icon-animated"></i> Monitoramento de Rede</h1>
</div>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-icon green"><i class="fas fa-server animate-pulse"></i></div>
<div class="stat-info">
<h3>12/15</h3>
<p>Servidores Online</p>
</div>
</div>
<div class="stat-card">
<div class="stat-icon blue"><i class="fas fa-network-wired animate-bounce"></i></div>
<div class="stat-info">
<h3>98.5%</h3>
<p>Uptime</p>
</div>
</div>
<div class="stat-card">
<div class="stat-icon yellow"><i class="fas fa-tachometer-alt animate-spin"></i></div>
<div class="stat-info">
<h3>45 Mbps</h3>
<p>Tráfego Médio</p>
</div>
</div>
<div class="stat-card">
<div class="stat-icon red"><i class="fas fa-exclamation-triangle animate-bounce"></i></div>
<div class="stat-info">
<h3>2</h3>
<p>Alertas Ativos</p>
</div>
</div>
</div>
<div class="card">
<div class="card-header">
<h3 class="card-title">Status dos Servidores</h3>
</div>
<div class="card-body">
<table class="table">
<thead>
<tr><th>Servidor</th><th>IP</th><th>Status</th><th>CPU</th><th>RAM</th><th>Disco</th><th>Uptime</th></tr>
</thead>
<tbody>
<tr>
<td>SRV-WEB-01</td>
<td>192.168.1.10</td>
<td><span class="badge badge-progress">Online</span></td>
<td>45%</td>
<td>62%</td>
<td>78%</td>
<td>15 dias</td>
</tr>
<tr>
<td>SRV-DB-01</td>
<td>192.168.1.11</td>
<td><span class="badge badge-progress">Online</span></td>
<td>68%</td>
<td>85%</td>
<td>65%</td>
<td>30 dias</td>
</tr>
<tr>
<td>SRV-FILE-01</td>
<td>192.168.1.12</td>
<td><span class="badge badge-high">Alerta</span></td>
<td>92%</td>
<td>78%</td>
<td>95%</td>
<td>45 dias</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</main>
</div>

<!-- Modal Novo Chamado -->
<div id="modalTicket" class="modal">
<div class="modal-dialog">
<div class="modal-header">
<h3 class="modal-title">Novo Chamado</h3>
<button class="btn-close" onclick="closeModal('modalTicket')">×</button>
</div>
<div class="modal-body">
<form id="formTicket">
<div class="form-group">
<label>Título *</label>
<input type="text" class="form-control" id="ticketTitle" required>
</div>
<div class="form-group">
<label>Categoria *</label>
<select class="form-control" id="ticketCategory" required>
<option value="">Selecione...</option>
<option value="Hardware">Hardware</option>
<option value="Software">Software</option>
<option value="Rede">Rede</option>
<option value="Email">Email</option>
<option value="Impressora">Impressora</option>
<option value="Acesso">Acesso</option>
</select>
</div>
<div class="form-group">
<label>Prioridade *</label>
<select class="form-control" id="ticketPriority" required>
<option value="Baixa">Baixa</option>
<option value="Média" selected>Média</option>
<option value="Alta">Alta</option>
<option value="Urgente">Urgente</option>
</select>
</div>
<div class="form-group">
<label>Descrição *</label>
<textarea class="form-control" id="ticketDescription" rows="5" required></textarea>
</div>
</form>
</div>
<div class="modal-footer">
<button class="btn btn-secondary" onclick="closeModal('modalTicket')">Cancelar</button>
<button class="btn btn-primary" onclick="saveTicket()">
<i class="fas fa-save"></i> Salvar
</button>
</div>
</div>
</div>

<!-- Modal Novo Ativo -->
<div id="modalAsset" class="modal">
<div class="modal-dialog">
<div class="modal-header">
<h3 class="modal-title">Novo Ativo</h3>
<button class="btn-close" onclick="closeModal('modalAsset')">×</button>
</div>
<div class="modal-body">
<form id="formAsset">
<div class="form-group">
<label>Nome *</label>
<input type="text" class="form-control" id="assetName" required>
</div>
<div class="form-group">
<label>Tipo *</label>
<select class="form-control" id="assetType" required>
<option value="">Selecione...</option>
<option value="Computador">Computador</option>
<option value="Notebook">Notebook</option>
<option value="Impressora">Impressora</option>
<option value="Switch">Switch</option>
<option value="Roteador">Roteador</option>
<option value="Celular">Celular</option>
<option value="Tablet">Tablet</option>
</select>
</div>
<div class="form-group">
<label>Fabricante</label>
<input type="text" class="form-control" id="assetManufacturer">
</div>
<div class="form-group">
<label>Modelo</label>
<input type="text" class="form-control" id="assetModel">
</div>
<div class="form-group">
<label>Número de Série</label>
<input type="text" class="form-control" id="assetSerial">
</div>
<div class="form-group">
<label>Localização</label>
<input type="text" class="form-control" id="assetLocation">
</div>
</form>
</div>
<div class="modal-footer">
<button class="btn btn-secondary" onclick="closeModal('modalAsset')">Cancelar</button>
<button class="btn btn-primary" onclick="saveAsset()">
<i class="fas fa-save"></i> Salvar
</button>
</div>
</div>
</div>

<script>
// Sistema Uniselva - Gestão de TI
let currentUser=null;
let tickets=[];
let assets=[];
let users=[];
let knowledge=[];
let slas=[];

// Inicialização
document.addEventListener('DOMContentLoaded',()=>{
loadData();
setupEventListeners();
});

function loadData(){
users=JSON.parse(localStorage.getItem('glpi_users'))||[
{id:1,name:'Administrador',email:'admin@empresa.com',username:'admin',password:'admin123',role:'admin',department:'TI',status:'Ativo'},
{id:2,name:'João Técnico',email:'tecnico@empresa.com',username:'tecnico',password:'tec123',role:'technician',department:'TI',status:'Ativo'},
{id:3,name:'Maria Silva',email:'user@empresa.com',username:'user',password:'user123',role:'user',department:'Financeiro',status:'Ativo'}
];
tickets=JSON.parse(localStorage.getItem('glpi_tickets'))||[];
assets=JSON.parse(localStorage.getItem('glpi_assets'))||[];
knowledge=JSON.parse(localStorage.getItem('glpi_knowledge'))||[];
slas=JSON.parse(localStorage.getItem('glpi_slas'))||[];

// Dados de exemplo
if(tickets.length===0){
const now=new Date();
tickets=[
{id:1,title:'Computador não liga',category:'Hardware',priority:'Alta',status:'Novo',requester:'Maria Silva',technician:'João Técnico',description:'Computador da sala 5 não está ligando',created:new Date(now.getTime()-2*24*60*60*1000).toISOString()},
{id:2,title:'Instalação de software',category:'Software',priority:'Média',status:'Atribuído',requester:'Carlos Santos',technician:'João Técnico',description:'Preciso instalar o Office',created:new Date(now.getTime()-1*24*60*60*1000).toISOString()},
{id:3,title:'Internet lenta',category:'Rede',priority:'Baixa',status:'Em Progresso',requester:'Ana Costa',technician:'João Técnico',description:'Internet muito lenta no setor',created:new Date(now.getTime()-5*24*60*60*1000).toISOString()},
{id:4,title:'Email não funciona',category:'Email',priority:'Urgente',status:'Novo',requester:'Pedro Lima',technician:'',description:'Não consigo acessar meu email',created:new Date(now.getTime()-3*60*60*1000).toISOString()}
];
}

if(assets.length===0){
assets=[
{id:1,name:'PC-001',type:'Computador',manufacturer:'Dell',model:'OptiPlex 7090',serial:'SN123456',location:'Sala 101',status:'Em Uso'},
{id:2,name:'NB-001',type:'Notebook',manufacturer:'Lenovo',model:'ThinkPad X1',serial:'SN789012',location:'Sala 205',status:'Em Uso'},
{id:3,name:'IMP-001',type:'Impressora',manufacturer:'HP',model:'LaserJet Pro',serial:'SN345678',location:'Recepção',status:'Em Uso'},
{id:4,name:'SW-001',type:'Switch',manufacturer:'Cisco',model:'Catalyst 2960',serial:'SN901234',location:'Rack Principal',status:'Em Uso'}
];
}

if(knowledge.length===0){
knowledge=[
{id:1,title:'Como resetar senha do Windows',category:'Sistema Operacional',content:'1. Pressione Ctrl+Alt+Del\n2. Clique em Alterar senha\n3. Digite a senha antiga e a nova senha',views:45,created:new Date().toISOString()},
{id:2,title:'Configurar email no Outlook',category:'Email',content:'1. Abra o Outlook\n2. Vá em Arquivo > Adicionar Conta\n3. Digite seu email e senha\n4. Clique em Conectar',views:32,created:new Date().toISOString()}
];
}

if(slas.length===0){
slas=[
{id:1,name:'SLA Crítico',type:'Tempo de Resposta',priority:'Urgente',responseTime:'1h',resolutionTime:'4h',status:'Ativo'},
{id:2,name:'SLA Alto',type:'Tempo de Resposta',priority:'Alta',responseTime:'2h',resolutionTime:'8h',status:'Ativo'},
{id:3,name:'SLA Médio',type:'Tempo de Resposta',priority:'Média',responseTime:'4h',resolutionTime:'24h',status:'Ativo'}
];
}

saveData();
}

function saveData(){
localStorage.setItem('glpi_users',JSON.stringify(users));
localStorage.setItem('glpi_tickets',JSON.stringify(tickets));
localStorage.setItem('glpi_assets',JSON.stringify(assets));
localStorage.setItem('glpi_knowledge',JSON.stringify(knowledge));
localStorage.setItem('glpi_slas',JSON.stringify(slas));
}

function setupEventListeners(){
document.getElementById('formLogin').onsubmit=e=>{
e.preventDefault();
const username=document.getElementById('username').value;
const password=document.getElementById('password').value;
const user=users.find(u=>u.username===username&&u.password===password);
if(user){
currentUser=user;
showDashboard();
}else{
alert('Usuário ou senha incorretos!');
}
};

document.getElementById('btnLogout').onclick=()=>{
currentUser=null;
document.getElementById('login').classList.remove('hide');
document.getElementById('dashboard').classList.add('hide');
};

document.querySelectorAll('.nav-item').forEach(item=>{
item.onclick=()=>{
const page=item.dataset.page;
if(page)showPage(page);
};
});
}

function showDashboard(){
document.getElementById('login').classList.add('hide');
document.getElementById('dashboard').classList.remove('hide');
document.getElementById('userName').textContent=currentUser.name;
document.getElementById('userRole').textContent=currentUser.role==='admin'?'Administrador':currentUser.role==='technician'?'Técnico':'Usuário';
document.getElementById('userAvatar').textContent=currentUser.name.charAt(0);

if(currentUser.role!=='admin'){
document.querySelectorAll('.admin-only').forEach(el=>el.classList.add('hide'));
}

loadHomePage();
}

function showPage(page){
document.querySelectorAll('.page').forEach(p=>p.classList.add('hide'));
document.getElementById('page-'+page).classList.remove('hide');
document.querySelectorAll('.nav-item').forEach(i=>i.classList.remove('active'));
document.querySelector(`[data-page="${page}"]`).classList.add('active');
document.getElementById('breadcrumbText').textContent=page.charAt(0).toUpperCase()+page.slice(1);

switch(page){
case 'home':loadHomePage();break;
case 'tickets':loadTicketsPage();break;
case 'assets':loadAssetsPage();break;
case 'users':loadUsersPage();break;
case 'knowledge':loadKnowledgePage();break;
case 'sla':loadSLAPage();break;
case 'reports':loadReportsPage();break;
case 'contracts':loadContractsPage();break;
case 'suppliers':loadSuppliersPage();break;
case 'projects':loadProjectsPage();break;
case 'reservations':loadReservationsPage();break;
case 'budget':loadBudgetPage();break;
case 'changes':loadChangesPage();break;
case 'problems':loadProblemsPage();break;
case 'licenses':loadLicensesPage();break;
case 'documents':loadDocumentsPage();break;
case 'faq':loadFAQPage();break;
case 'audit':loadAuditPage();break;
case 'monitoring':break;
}
}

function loadHomePage(){
document.getElementById('statTotalTickets').textContent=tickets.length;
document.getElementById('statOpenTickets').textContent=tickets.filter(t=>t.status==='Novo'||t.status==='Atribuído').length;
document.getElementById('statSolvedTickets').textContent=tickets.filter(t=>t.status==='Resolvido'||t.status==='Fechado').length;
document.getElementById('statAssets').textContent=assets.length;

const recent=tickets.slice(0,5);
const html=recent.length?`
<table class="table">
<thead>
<tr><th>ID</th><th>Título</th><th>Status</th><th>Prioridade</th><th>Solicitante</th></tr>
</thead>
<tbody>
${recent.map(t=>`
<tr>
<td>#${t.id}</td>
<td>${t.title}</td>
<td><span class="badge badge-${getStatusClass(t.status)}">${t.status}</span></td>
<td><span class="badge badge-${getPriorityClass(t.priority)}">${t.priority}</span></td>
<td>${t.requester}</td>
</tr>
`).join('')}
</tbody>
</table>
`:'<p style="text-align:center;padding:2rem;color:var(--text-muted)">Nenhum chamado recente</p>';
document.getElementById('recentTickets').innerHTML=html;
}

function loadTicketsPage(){
const html=tickets.map(t=>`
<tr>
<td>#${t.id}</td>
<td>${t.title}</td>
<td>${t.requester}</td>
<td>${t.category}</td>
<td><span class="badge badge-${getPriorityClass(t.priority)}">${t.priority}</span></td>
<td><span class="badge badge-${getStatusClass(t.status)}">${t.status}</span></td>
<td>${t.technician||'Não atribuído'}</td>
<td>
<button class="btn btn-sm btn-primary" onclick="viewTicket(${t.id})">
<i class="fas fa-eye"></i>
</button>
</td>
</tr>
`).join('');
document.getElementById('ticketsTable').innerHTML=html||'<tr><td colspan="8" style="text-align:center">Nenhum chamado</td></tr>';
}

function loadAssetsPage(){
document.getElementById('statComputers').textContent=assets.filter(a=>a.type==='Computador'||a.type==='Notebook').length;
document.getElementById('statPrinters').textContent=assets.filter(a=>a.type==='Impressora').length;
document.getElementById('statNetwork').textContent=assets.filter(a=>a.type==='Switch'||a.type==='Roteador').length;
document.getElementById('statMobiles').textContent=assets.filter(a=>a.type==='Celular'||a.type==='Tablet').length;

const html=assets.map(a=>`
<tr>
<td>#${a.id}</td>
<td>${a.name}</td>
<td>${a.type}</td>
<td>${a.manufacturer}</td>
<td>${a.model}</td>
<td>${a.location}</td>
<td><span class="badge badge-progress">${a.status}</span></td>
<td>
<button class="btn btn-sm btn-primary" onclick="viewAsset(${a.id})">
<i class="fas fa-eye"></i>
</button>
</td>
</tr>
`).join('');
document.getElementById('assetsTable').innerHTML=html||'<tr><td colspan="8" style="text-align:center">Nenhum ativo</td></tr>';
}

function loadUsersPage(){
const html=users.map(u=>`
<tr>
<td>#${u.id}</td>
<td>${u.name}</td>
<td>${u.email}</td>
<td><span class="badge badge-${u.role==='admin'?'high':u.role==='technician'?'medium':'low'}">${u.role==='admin'?'Admin':u.role==='technician'?'Técnico':'Usuário'}</span></td>
<td>${u.department}</td>
<td><span class="badge badge-progress">${u.status}</span></td>
<td class="admin-only hide">
<button class="btn btn-sm btn-primary" onclick="editUser(${u.id})">
<i class="fas fa-edit"></i>
</button>
</td>
</tr>
`).join('');
document.getElementById('usersTable').innerHTML=html;
}

function loadKnowledgePage(){
const html=knowledge.map(k=>`
<div class="card">
<div class="card-header">
<h3 class="card-title">${k.title}</h3>
<span class="badge badge-low">${k.category}</span>
</div>
<div class="card-body">
<p style="white-space:pre-wrap">${k.content}</p>
<p style="color:var(--text-muted);font-size:0.85rem;margin-top:1rem">
<i class="fas fa-eye"></i> ${k.views} visualizações
</p>
</div>
</div>
`).join('');
document.getElementById('knowledgeList').innerHTML=html||'<p style="text-align:center;padding:2rem">Nenhum artigo</p>';
}

function loadSLAPage(){
const html=slas.map(s=>`
<tr>
<td>${s.name}</td>
<td>${s.type}</td>
<td><span class="badge badge-${getPriorityClass(s.priority)}">${s.priority}</span></td>
<td>${s.responseTime}</td>
<td>${s.resolutionTime}</td>
<td><span class="badge badge-progress">${s.status}</span></td>
<td>
<button class="btn btn-sm btn-primary" onclick="editSLA(${s.id})">
<i class="fas fa-edit"></i>
</button>
</td>
</tr>
`).join('');
document.getElementById('slaTable').innerHTML=html;
}

function loadContractsPage(){
const contracts=[
{id:1,name:'Suporte Microsoft',supplier:'Microsoft',type:'Suporte',start:'01/01/2024',end:'31/12/2024',value:'R$ 50.000',status:'Ativo'},
{id:2,name:'Licenças Adobe',supplier:'Adobe',type:'Licença',start:'01/03/2024',end:'28/02/2025',value:'R$ 30.000',status:'Ativo'}
];
const html=contracts.map(c=>`
<tr>
<td>#${c.id}</td>
<td>${c.name}</td>
<td>${c.supplier}</td>
<td>${c.type}</td>
<td>${c.start}</td>
<td>${c.end}</td>
<td>${c.value}</td>
<td><span class="badge badge-progress">${c.status}</span></td>
<td><button class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></button></td>
</tr>
`).join('');
document.getElementById('contractsTable').innerHTML=html;
}

function loadSuppliersPage(){
const suppliers=[
{id:1,name:'Dell Computadores',cnpj:'12.345.678/0001-90',contact:'João Silva',email:'contato@dell.com',phone:'(11) 3333-4444',status:'Ativo'},
{id:2,name:'HP Brasil',cnpj:'98.765.432/0001-10',contact:'Maria Santos',email:'vendas@hp.com',phone:'(11) 5555-6666',status:'Ativo'}
];
const html=suppliers.map(s=>`
<tr>
<td>#${s.id}</td>
<td>${s.name}</td>
<td>${s.cnpj}</td>
<td>${s.contact}</td>
<td>${s.email}</td>
<td>${s.phone}</td>
<td><span class="badge badge-progress">${s.status}</span></td>
<td><button class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></button></td>
</tr>
`).join('');
document.getElementById('suppliersTable').innerHTML=html;
}

function loadProjectsPage(){
const projects=[
{id:1,name:'Migração para Cloud',manager:'João Técnico',start:'01/01/2024',deadline:'30/06/2024',progress:65,status:'Em Andamento'},
{id:2,name:'Atualização de Servidores',manager:'Maria Admin',start:'15/02/2024',deadline:'15/05/2024',progress:40,status:'Em Andamento'}
];
const html=projects.map(p=>`
<tr>
<td>#${p.id}</td>
<td>${p.name}</td>
<td>${p.manager}</td>
<td>${p.start}</td>
<td>${p.deadline}</td>
<td><div style="background:#e0e0e0;border-radius:10px;height:20px;overflow:hidden"><div style="background:var(--success);width:${p.progress}%;height:100%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:0.75rem">${p.progress}%</div></div></td>
<td><span class="badge badge-progress">${p.status}</span></td>
<td><button class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></button></td>
</tr>
`).join('');
document.getElementById('projectsTable').innerHTML=html;
}

function loadReservationsPage(){
const reservations=[
{id:1,item:'Sala de Reunião A',user:'Carlos Santos',start:'25/11/2024 14:00',end:'25/11/2024 16:00',status:'Confirmada'},
{id:2,item:'Projetor Portátil',user:'Ana Costa',start:'26/11/2024 09:00',end:'26/11/2024 12:00',status:'Pendente'}
];
const html=reservations.map(r=>`
<tr>
<td>#${r.id}</td>
<td>${r.item}</td>
<td>${r.user}</td>
<td>${r.start}</td>
<td>${r.end}</td>
<td><span class="badge badge-${r.status==='Confirmada'?'progress':'assigned'}">${r.status}</span></td>
<td><button class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></button></td>
</tr>
`).join('');
document.getElementById('reservationsTable').innerHTML=html;
}

function loadBudgetPage(){
const budgets=[
{id:1,name:'TI 2024',value:'R$ 500.000',spent:'R$ 320.000',balance:'R$ 180.000',period:'2024',status:'Ativo'},
{id:2,name:'Infraestrutura Q1',value:'R$ 150.000',spent:'R$ 95.000',balance:'R$ 55.000',period:'Q1/2024',status:'Ativo'}
];
const html=budgets.map(b=>`
<tr>
<td>#${b.id}</td>
<td>${b.name}</td>
<td>${b.value}</td>
<td>${b.spent}</td>
<td>${b.balance}</td>
<td>${b.period}</td>
<td><span class="badge badge-progress">${b.status}</span></td>
<td><button class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></button></td>
</tr>
`).join('');
document.getElementById('budgetTable').innerHTML=html;
}

function loadChangesPage(){
const changes=[
{id:1,title:'Atualização Windows Server',type:'Atualização',impact:'Alto',urgency:'Média',status:'Planejada',responsible:'João Técnico'},
{id:2,title:'Migração Banco de Dados',type:'Migração',impact:'Crítico',urgency:'Alta',status:'Em Aprovação',responsible:'Maria Admin'}
];
const html=changes.map(c=>`
<tr>
<td>#${c.id}</td>
<td>${c.title}</td>
<td>${c.type}</td>
<td><span class="badge badge-${c.impact==='Crítico'?'high':'medium'}">${c.impact}</span></td>
<td><span class="badge badge-${getPriorityClass(c.urgency)}">${c.urgency}</span></td>
<td><span class="badge badge-assigned">${c.status}</span></td>
<td>${c.responsible}</td>
<td><button class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></button></td>
</tr>
`).join('');
document.getElementById('changesTable').innerHTML=html;
}

function loadProblemsPage(){
const problems=[
{id:1,title:'Lentidão na Rede',category:'Rede',impact:'Alto',urgency:'Alta',status:'Em Análise',analyst:'João Técnico'},
{id:2,title:'Falhas Intermitentes no Email',category:'Email',impact:'Médio',urgency:'Média',status:'Novo',analyst:''}
];
const html=problems.map(p=>`
<tr>
<td>#${p.id}</td>
<td>${p.title}</td>
<td>${p.category}</td>
<td><span class="badge badge-${p.impact==='Alto'?'high':'medium'}">${p.impact}</span></td>
<td><span class="badge badge-${getPriorityClass(p.urgency)}">${p.urgency}</span></td>
<td><span class="badge badge-${p.status==='Novo'?'new':'progress'}">${p.status}</span></td>
<td>${p.analyst||'Não atribuído'}</td>
<td><button class="btn btn-sm btn-primary"><i class="fas fa-eye"></i></button></td>
</tr>
`).join('');
document.getElementById('problemsTable').innerHTML=html;
}

function loadReportsPage(){
if(typeof Chart==='undefined')return;

const statusData={
'Novo':tickets.filter(t=>t.status==='Novo').length,
'Atribuído':tickets.filter(t=>t.status==='Atribuído').length,
'Em Progresso':tickets.filter(t=>t.status==='Em Progresso').length,
'Resolvido':tickets.filter(t=>t.status==='Resolvido').length,
'Fechado':tickets.filter(t=>t.status==='Fechado').length
};

const ctx1=document.getElementById('chartStatus');
if(window.chartStatusGLPI)window.chartStatusGLPI.destroy();
window.chartStatusGLPI=new Chart(ctx1,{
type:'doughnut',
data:{
labels:Object.keys(statusData),
datasets:[{
data:Object.values(statusData),
backgroundColor:['#0d6efd','#ffc107','#0dcaf0','#198754','#6c757d']
}]
},
options:{responsive:true,maintainAspectRatio:false}
});

const categoryData={};
tickets.forEach(t=>{
categoryData[t.category]=(categoryData[t.category]||0)+1;
});

const ctx2=document.getElementById('chartCategory');
if(window.chartCategoryGLPI)window.chartCategoryGLPI.destroy();
window.chartCategoryGLPI=new Chart(ctx2,{
type:'bar',
data:{
labels:Object.keys(categoryData),
datasets:[{
label:'Chamados',
data:Object.values(categoryData),
backgroundColor:'#0d6efd'
}]
},
options:{responsive:true,maintainAspectRatio:false}
});
}

function openNewTicket(){
document.getElementById('modalTicket').classList.add('show');
}

function saveTicket(){
const ticket={
id:tickets.length+1,
title:document.getElementById('ticketTitle').value,
category:document.getElementById('ticketCategory').value,
priority:document.getElementById('ticketPriority').value,
description:document.getElementById('ticketDescription').value,
status:'Novo',
requester:currentUser.name,
technician:'',
created:new Date().toISOString()
};
tickets.unshift(ticket);
saveData();
closeModal('modalTicket');
document.getElementById('formTicket').reset();
loadTicketsPage();
alert('Chamado criado com sucesso!');
}

function openNewAsset(){
document.getElementById('modalAsset').classList.add('show');
}

function saveAsset(){
const asset={
id:assets.length+1,
name:document.getElementById('assetName').value,
type:document.getElementById('assetType').value,
manufacturer:document.getElementById('assetManufacturer').value,
model:document.getElementById('assetModel').value,
serial:document.getElementById('assetSerial').value,
location:document.getElementById('assetLocation').value,
status:'Em Uso'
};
assets.push(asset);
saveData();
closeModal('modalAsset');
document.getElementById('formAsset').reset();
loadAssetsPage();
alert('Ativo cadastrado com sucesso!');
}

function closeModal(id){
document.getElementById(id).classList.remove('show');
}

function getStatusClass(status){
const map={'Novo':'new','Atribuído':'assigned','Em Progresso':'progress','Resolvido':'solved','Fechado':'closed'};
return map[status]||'new';
}

function getPriorityClass(priority){
const map={'Baixa':'low','Média':'medium','Alta':'high','Urgente':'high'};
return map[priority]||'medium';
}

function viewTicket(id){alert('Visualizar chamado #'+id);}
function viewAsset(id){alert('Visualizar ativo #'+id);}
function editUser(id){alert('Editar usuário #'+id);}
function editSLA(id){alert('Editar SLA #'+id);}
function openNewUser(){alert('Novo usuário');}
function openNewArticle(){alert('Novo artigo');}
function openNewSLA(){alert('Novo SLA');}
function openNewContract(){alert('Novo contrato');}
function openNewSupplier(){alert('Novo fornecedor');}
function openNewProject(){alert('Novo projeto');}
function openNewReservation(){alert('Nova reserva');}
function openNewBudget(){alert('Novo orçamento');}
function openNewChange(){alert('Nova mudança');}
function openNewProblem(){alert('Novo problema');}
function saveSettings(){
showNotification('Configurações salvas com sucesso!','success');
}

// Sistema de Notificações
function showNotification(message,type='info'){
const notif=document.createElement('div');
notif.className=`notification ${type}`;
notif.innerHTML=`
<div style="display:flex;align-items:center;gap:1rem">
<i class="fas fa-${type==='success'?'check-circle':type==='error'?'exclamation-circle':'info-circle'}" style="font-size:1.5rem"></i>
<div>
<strong>${type==='success'?'Sucesso':type==='error'?'Erro':'Informação'}</strong>
<p style="margin:0;font-size:0.9rem">${message}</p>
</div>
</div>
`;
document.body.appendChild(notif);
setTimeout(()=>notif.remove(),3000);
}

// Detalhes do Chamado - Modal Completo
function viewTicket(id){
const ticket=tickets.find(t=>t.id===id);
if(!ticket)return;
const modal=document.createElement('div');
modal.className='modal show';
modal.innerHTML=`
<div class="modal-dialog" style="max-width:1000px">
<div class="modal-header">
<h3 class="modal-title">Chamado #${ticket.id} - ${ticket.title}</h3>
<button class="btn-close" onclick="this.closest('.modal').remove()">×</button>
</div>
<div class="modal-body">
<div style="display:grid;grid-template-columns:2fr 1fr;gap:2rem">
<div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-info-circle"></i> Informações</h4>
</div>
<div class="card-body">
<table style="width:100%">
<tr><td><strong>Status:</strong></td><td><span class="badge badge-${getStatusClass(ticket.status)}">${ticket.status}</span></td></tr>
<tr><td><strong>Prioridade:</strong></td><td><span class="badge badge-${getPriorityClass(ticket.priority)}">${ticket.priority}</span></td></tr>
<tr><td><strong>Categoria:</strong></td><td>${ticket.category}</td></tr>
<tr><td><strong>Solicitante:</strong></td><td>${ticket.requester}</td></tr>
<tr><td><strong>Técnico:</strong></td><td>${ticket.technician||'Não atribuído'}</td></tr>
<tr><td><strong>Criado em:</strong></td><td>${new Date(ticket.created).toLocaleString('pt-BR')}</td></tr>
</table>
</div>
</div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-align-left"></i> Descrição</h4>
</div>
<div class="card-body">
<p style="white-space:pre-wrap">${ticket.description}</p>
</div>
</div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-comments"></i> Acompanhamento</h4>
</div>
<div class="card-body">
<div id="ticketFollowups"></div>
<div class="form-group" style="margin-top:1rem">
<textarea class="form-control" id="newFollowup" rows="3" placeholder="Adicionar acompanhamento..."></textarea>
<button class="btn btn-primary" style="margin-top:0.5rem" onclick="addFollowup(${ticket.id})">
<i class="fas fa-paper-plane"></i> Enviar
</button>
</div>
</div>
</div>
</div>
<div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-tasks"></i> Ações</h4>
</div>
<div class="card-body">
<button class="btn btn-success" style="width:100%;margin-bottom:0.5rem" onclick="updateTicketStatus(${ticket.id},'Resolvido')">
<i class="fas fa-check"></i> Resolver
</button>
<button class="btn btn-danger" style="width:100%;margin-bottom:0.5rem" onclick="updateTicketStatus(${ticket.id},'Fechado')">
<i class="fas fa-times"></i> Fechar
</button>
<button class="btn btn-secondary" style="width:100%" onclick="assignTicket(${ticket.id})">
<i class="fas fa-user"></i> Atribuir
</button>
</div>
</div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-clock"></i> Timeline</h4>
</div>
<div class="card-body">
<div style="border-left:2px solid var(--primary);padding-left:1rem">
<div style="margin-bottom:1rem">
<div style="font-size:0.85rem;color:var(--text-muted)">
${new Date(ticket.created).toLocaleString('pt-BR')}
</div>
<div><i class="fas fa-plus-circle" style="color:var(--primary)"></i> Chamado criado</div>
</div>
<div style="margin-bottom:1rem">
<div style="font-size:0.85rem;color:var(--text-muted)">
${new Date(ticket.created).toLocaleString('pt-BR')}
</div>
<div><i class="fas fa-user" style="color:var(--info)"></i> Atribuído a ${ticket.technician||'Aguardando'}</div>
</div>
</div>
</div>
</div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-paperclip"></i> Anexos</h4>
</div>
<div class="card-body">
<button class="btn btn-sm btn-secondary" style="width:100%">
<i class="fas fa-upload"></i> Adicionar Arquivo
</button>
<p style="text-align:center;color:var(--text-muted);margin-top:1rem;font-size:0.85rem">Nenhum anexo</p>
</div>
</div>
</div>
</div>
</div>
</div>
`;
document.body.appendChild(modal);
}

function updateTicketStatus(id,status){
const ticket=tickets.find(t=>t.id===id);
if(ticket){
ticket.status=status;
saveData();
showNotification(`Chamado #${id} atualizado para ${status}`,'success');
document.querySelector('.modal.show')?.remove();
loadTicketsPage();
}
}

function addFollowup(id){
const text=document.getElementById('newFollowup').value;
if(!text)return;
showNotification('Acompanhamento adicionado!','success');
document.getElementById('newFollowup').value='';
}

function assignTicket(id){
const tech=prompt('Digite o nome do técnico:');
if(tech){
const ticket=tickets.find(t=>t.id===id);
if(ticket){
ticket.technician=tech;
saveData();
showNotification(`Chamado atribuído a ${tech}`,'success');
document.querySelector('.modal.show')?.remove();
loadTicketsPage();
}
}
}



// Detalhes do Ativo - Modal Completo
function viewAsset(id){
const asset=assets.find(a=>a.id===id);
if(!asset)return;
const modal=document.createElement('div');
modal.className='modal show';
modal.innerHTML=`
<div class="modal-dialog" style="max-width:900px">
<div class="modal-header">
<h3 class="modal-title"><i class="fas fa-desktop"></i> ${asset.name} - ${asset.type}</h3>
<button class="btn-close" onclick="this.closest('.modal').remove()">×</button>
</div>
<div class="modal-body">
<div style="display:grid;grid-template-columns:1fr 1fr;gap:2rem">
<div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-info-circle"></i> Informações Gerais</h4>
</div>
<div class="card-body">
<table style="width:100%">
<tr><td><strong>Nome:</strong></td><td>${asset.name}</td></tr>
<tr><td><strong>Tipo:</strong></td><td>${asset.type}</td></tr>
<tr><td><strong>Fabricante:</strong></td><td>${asset.manufacturer}</td></tr>
<tr><td><strong>Modelo:</strong></td><td>${asset.model}</td></tr>
<tr><td><strong>Nº Série:</strong></td><td>${asset.serial}</td></tr>
<tr><td><strong>Localização:</strong></td><td>${asset.location}</td></tr>
<tr><td><strong>Status:</strong></td><td><span class="badge badge-progress">${asset.status}</span></td></tr>
</table>
</div>
</div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-tools"></i> Manutenções</h4>
</div>
<div class="card-body">
<button class="btn btn-sm btn-primary" style="width:100%;margin-bottom:1rem">
<i class="fas fa-plus"></i> Agendar Manutenção
</button>
<p style="text-align:center;color:var(--text-muted);font-size:0.85rem">Nenhuma manutenção agendada</p>
</div>
</div>
</div>
<div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-history"></i> Histórico</h4>
</div>
<div class="card-body">
<div style="border-left:2px solid var(--primary);padding-left:1rem">
<div style="margin-bottom:1rem">
<div style="font-size:0.85rem;color:var(--text-muted)">
${new Date().toLocaleDateString('pt-BR')}
</div>
<div><i class="fas fa-plus-circle" style="color:var(--success)"></i> Ativo cadastrado</div>
</div>
<div style="margin-bottom:1rem">
<div style="font-size:0.85rem;color:var(--text-muted)">
${new Date().toLocaleDateString('pt-BR')}
</div>
<div><i class="fas fa-map-marker-alt" style="color:var(--info)"></i> Localizado em ${asset.location}</div>
</div>
</div>
</div>
</div>
<div class="card">
<div class="card-header">
<h4 class="card-title"><i class="fas fa-chart-line"></i> Estatísticas</h4>
</div>
<div class="card-body">
<div style="margin-bottom:1rem">
<div style="display:flex;justify-content:space-between;margin-bottom:0.5rem">
<span>Tempo de Uso</span>
<strong>85%</strong>
</div>
<div style="background:var(--border);height:10px;border-radius:5px;overflow:hidden">
<div style="background:var(--success);width:85%;height:100%"></div>
</div>
</div>
<div style="margin-bottom:1rem">
<div style="display:flex;justify-content:space-between;margin-bottom:0.5rem">
<span>Disponibilidade</span>
<strong>98%</strong>
</div>
<div style="background:var(--border);height:10px;border-radius:5px;overflow:hidden">
<div style="background:var(--primary);width:98%;height:100%"></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
`;
document.body.appendChild(modal);
}

// Sistema de Licenças de Software
let licenses=[];

function loadLicensesPage(){
if(licenses.length===0){
licenses=[
{id:1,software:'Microsoft Office 365',type:'Assinatura',quantity:50,used:45,expiry:'31/12/2024',cost:'R$ 15.000',status:'Ativo'},
{id:2,software:'Adobe Creative Cloud',type:'Assinatura',quantity:10,used:8,expiry:'15/06/2024',cost:'R$ 8.000',status:'Ativo'},
{id:3,software:'Windows Server 2022',type:'Perpétua',quantity:5,used:5,expiry:'-',cost:'R$ 25.000',status:'Ativo'}
];
}
const html=licenses.map(l=>`
<tr>
<td>#${l.id}</td>
<td>${l.software}</td>
<td>${l.type}</td>
<td>${l.used}/${l.quantity}</td>
<td>${l.expiry}</td>
<td>${l.cost}</td>
<td><span class="badge badge-progress">${l.status}</span></td>
<td>
<button class="btn btn-sm btn-primary" onclick="viewLicense(${l.id})">
<i class="fas fa-eye"></i>
</button>
</td>
</tr>
`).join('');
document.getElementById('licensesTable').innerHTML=html;
}

function viewLicense(id){
showNotification('Visualizando licença #'+id,'info');
}

// Sistema de Documentos
let documents=[];

function loadDocumentsPage(){
if(documents.length===0){
documents=[
{id:1,title:'Manual de Procedimentos TI',category:'Manuais',size:'2.5 MB',uploaded:'20/11/2024',author:'Admin',downloads:15},
{id:2,title:'Política de Segurança',category:'Políticas',size:'1.2 MB',uploaded:'15/11/2024',author:'Admin',downloads:32}
];
}
const html=documents.map(d=>`
<div class="card">
<div class="card-body" style="display:flex;justify-content:space-between;align-items:center">
<div style="display:flex;align-items:center;gap:1rem">
<i class="fas fa-file-pdf" style="font-size:2rem;color:var(--danger)"></i>
<div>
<h4 style="margin:0">${d.title}</h4>
<p style="margin:0;font-size:0.85rem;color:var(--text-muted)">
${d.category} • ${d.size} • ${d.downloads} downloads
</p>
</div>
</div>
<div>
<button class="btn btn-sm btn-primary">
<i class="fas fa-download"></i> Baixar
</button>
</div>
</div>
</div>
`).join('');
document.getElementById('documentsList').innerHTML=html;
}

// Sistema de FAQ
let faqs=[];

function loadFAQPage(){
if(faqs.length===0){
faqs=[
{id:1,question:'Como resetar minha senha?',answer:'Acesse o portal de autoatendimento e clique em "Esqueci minha senha". Siga as instruções enviadas por email.',category:'Acesso',views:156},
{id:2,question:'Como solicitar um novo equipamento?',answer:'Abra um chamado na categoria "Solicitação" e descreva o equipamento necessário. O setor de compras entrará em contato.',category:'Equipamentos',views:89},
{id:3,question:'Qual o horário de atendimento do suporte?',answer:'O suporte técnico funciona de segunda a sexta, das 8h às 18h. Para emergências, temos plantão 24/7.',category:'Suporte',views:234}
];
}
const html=faqs.map(f=>`
<div class="card">
<div class="card-header" style="cursor:pointer" onclick="toggleFAQ(${f.id})">
<div style="display:flex;justify-content:space-between;align-items:center">
<h4 class="card-title" style="margin:0">
<i class="fas fa-question-circle" style="color:var(--primary)"></i> ${f.question}
</h4>
<i class="fas fa-chevron-down" id="faq-icon-${f.id}"></i>
</div>
</div>
<div class="card-body hide" id="faq-answer-${f.id}">
<p>${f.answer}</p>
<p style="font-size:0.85rem;color:var(--text-muted);margin-top:1rem">
<i class="fas fa-tag"></i> ${f.category} • <i class="fas fa-eye"></i> ${f.views} visualizações
</p>
</div>
</div>
`).join('');
document.getElementById('faqList').innerHTML=html;
}

function toggleFAQ(id){
const answer=document.getElementById(`faq-answer-${id}`);
const icon=document.getElementById(`faq-icon-${id}`);
answer.classList.toggle('hide');
icon.classList.toggle('fa-chevron-down');
icon.classList.toggle('fa-chevron-up');
}

// Sistema de Auditoria
let auditLogs=[];

function loadAuditPage(){
if(auditLogs.length===0){
const now=new Date();
auditLogs=[
{id:1,user:'Admin',action:'Criou chamado #1',date:new Date(now.getTime()-1*60*60*1000).toISOString(),ip:'192.168.1.100'},
{id:2,user:'João Técnico',action:'Atualizou ativo PC-001',date:new Date(now.getTime()-2*60*60*1000).toISOString(),ip:'192.168.1.101'},
{id:3,user:'Maria Silva',action:'Fez login no sistema',date:new Date(now.getTime()-3*60*60*1000).toISOString(),ip:'192.168.1.102'}
];
}
const html=auditLogs.map(a=>`
<tr>
<td>#${a.id}</td>
<td>${a.user}</td>
<td>${a.action}</td>
<td>${new Date(a.date).toLocaleString('pt-BR')}</td>
<td>${a.ip}</td>
</tr>
`).join('');
document.getElementById('auditTable').innerHTML=html;
}


// Funções de abertura de modais
function openNewLicense(){showNotification('Abrindo formulário de nova licença','info');}
function openNewDocument(){showNotification('Abrindo upload de documento','info');}
function openNewFAQ(){showNotification('Abrindo formulário de nova FAQ','info');}

// Atualizar contadores em tempo real
setInterval(()=>{
if(document.getElementById('page-home').classList.contains('hide'))return;
const stats=document.querySelectorAll('.stat-card');
stats.forEach(card=>{
const icon=card.querySelector('i');
if(icon){
icon.style.transform=`scale(${1+Math.random()*0.1})`;
setTimeout(()=>icon.style.transform='scale(1)',300);
}
});
},5000);

// Inicialização completa
console.log('🚀 Sistema GLPI Completo Carregado!');
console.log('📊 Total de Páginas: 20+');
console.log('✨ Todas as funcionalidades ativas!');
</script>
</body>
</html>
